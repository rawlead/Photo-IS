<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head th:include="fragments/header :: head('News')"></head>
<body>
<header th:replace="fragments/header :: header">TOP NAVIGATION</header>
<div class="container-fluid" id="photoRoot">
    <div class="row hor-sep-60"></div>

    <ul th:replace="fragments/nav :: leftNav">LEFT SIDE NAVIGATION</ul>

    <div class="hor-sep-30"></div>
    <div class="row">
        <div class="col-md-5 offset-md-2">
            <h5><b>{{photo.title}}</b></h5>
            <p>{{photo.description}}</p>
            <img  style="width: 100%;" v-bind:src="photo.url" alt=""/>
        </div>



        <div class="col-md-5 ">
            <p>Comments:</p>
        </div>



    </div>
</div>
<div th:replace="fragments/footer :: scripts"></div>
<script>
    var photo = new Vue({
        el: '#photoRoot',
        data: {
            photo: {},
            loggedInUser: {}
        },
        mounted() {
            this.fetchPhotoById();
        },
        methods: {
            getPhotoId() {
                var splitted = window.location.href.split('/');
                return splitted[splitted.length - 1];
            },
            fetchPhotoById() {
                var id = this.getPhotoId();
                getPhotoRequest(id)
                    .then((resultAxios) => {
                        console.log(resultAxios.data);
                        this.photo = resultAxios.data;
                        this.fetchLoggedInUser();
                    }).catch(function (error) {
                    // this.statusMessage = error.response.data;
                }.bind(this))
            },
            fetchLoggedInUser() {
                if (getCookie("access_token")) {
                    getLoggedInUserRequest()
                        .then(function (response) {
                            this.loggedInUser = response.data;
                        }.bind(this))
                        .catch(function (error) {
                            deleteCookie("access_token");
                            return error;
                        });
                }
            },
        }

    })
</script>
</body>
</html>